matrix:
  include:
    - language: node_js
      node_js:
        - "10"
      dist: bionic
      before_install:
        - eval "$(gimme 1.12.x)"
      install:
        - curl --silent --show-error https://raw.githubusercontent.com/davidkhala/node-utils/master/install.sh | bash -s nodeGYPDependencies
        - curl --silent --show-error https://raw.githubusercontent.com/davidkhala/node-utils/master/scripts/npm.sh | bash -s packageLock false
        - npm install
        - sudo apt-get install -y softhsm2
      script:
        - ./docker.sh
        - node cc/golang/diagnose/test/
        - node test
        - ./test/hsm.sh

